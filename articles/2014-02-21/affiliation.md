## iTunes, App Store, iBooks and Mac App Store Affiliation

[Affiliation][] is a simple way to make extra revenues with your app or with your web site in the iOS/OSX world: it provides a way to link to songs, apps, movies, ebooks, earning you commissions on sales. The good news is that [affiliation on iTunes][] (including App Store, iBooks, and Mac App Store), is really easy to set-up. The bad news is that you will need a lot of audience before making real money. Here's a quick presentation, [since there have been some changes recently][].

1.	[__What's affiliation__](#a1)
2.	[__How to become an iTunes affiliate__](#a2)
3.	[__Linking__](#a3)
4.	[__API and tools__](#a4)
5.	[__Useful links__](#a5)


<h3 id="a1">1. What's affiliation</h3>

<img src="/2014/02/21/affiliation.png" alt="Affiliation on iTunes" width="600" height="350">

1. Assume you've released an iOS app. Somewhere in your app, you're promoting another iOS app; it can be one of your app, or __any app available__ on the App Store. The promoted app can be paid __or completely free__. The only requirement is that the promoted app is available on the App Store. 
2. Your user has tapped a button in your app to download this app, he is redirected to the corresponding page in the App Store. At this point, you're done: you sole job is to send customers to the App Store, by any means... Whether the user will buy the app that you've promoted or not is not relevant. At this moment, you're the current affiliate on the App Store.
3. Starting from now, and during the __next 24 hours__, you will earn a __7% commission on each sale__ done by the user. The user can quit your app, quit the App Store etc, every time he buys something on the store, you will be given a tiny 7% commission for the next 24 hours.

See, seems interesting! I'm using an iOS app in this example but really you can use affiliation with video, book, ringtones, tones, Mac app, podcasts, audiobooks, everything that is sold through iTunes, the App Store, iBooks and Mac App Store. In fact, __everything that you can link to is eligible to affiliation__. 

You will see, _it's all about links_. Given a link to the App Store, just add a parameter to this link identifying you (_the affiliate token_) will suffice to give you revenues.

Things to know:

- There is only one affiliate on the App Store at a given date: your interest is to send users from your app to the store (while not harassing them). That's why there are a lot of apps that promoted content and uses (and abuses) [Push Notifications][], to remain _the_ affiliate.
- Really you'll need _a lot_ of audience to make money.
- Affiliation is not limited to the iOS/OSX world: there is [an Amazon affiliation program][], but unfortunately [no affiliation program for Google Play][].

<h3 id="a2">2. How to become an iTunes affiliate</h3>

#### One to rule them all

Until very recently, iTunes Affiliate Program was operated by two or three platforms (Linkshare, Tradedoubler) and you had to register to each program to get affiliation revenues from all over the world.

Starting from 31 March 2014, there is now __one and only one__ affiliation program provider: [Performance Horizon Group][] (aka PHG). To become affiliate, you will have to register to the [iTunes Affiliate program with PHG][]. 

Before diving into the account creation, just a word about worldwide support. You will get revenues from customers residing in this 127 countries, but affiliates can be located in any countries:
 
<table style="width:100%">
<thead><th colspan="3">PHG</span></th></thead>
<tbody>

<tr><td>Argentina</td><td>Armenia</td><td>Australia</td></tr>
<tr><td>Austria</td><td>Bahamas</td><td>Bahrain</td></tr>
<tr><td>Barbados</td><td>Belarus</td><td>Belgium</td></tr>
<tr><td>Bermuda</td><td>Bolivia</td><td>Botswana</td></tr>
<tr><td>Brazil</td><td>Bulgaria</td><td>Canada</td></tr>
<tr><td>Cayman Islands</td><td>Chile</td><td>Colombia</td></tr>
<tr><td>Costa Rica</td><td>Croatia</td><td>Cyprus</td></tr>
<tr><td>Czech Republic</td><td>Denmark</td><td>Dominica</td></tr>
<tr><td>Ecuador</td><td>Egypt</td><td>El Salvador</td></tr>
<tr><td>Estonia</td><td>Finland</td><td>France</td></tr>
<tr><td>Germany</td><td>Greece</td><td>Guatemala</td></tr>
<tr><td>Honduras</td><td>Hong Kong</td><td>Hungary</td></tr>
<tr><td>India</td><td>Indonesia</td><td>Ireland</td></tr>
<tr><td>Israel</td><td>Italy</td><td>Japan</td></tr>
<tr><td>Jordan</td><td>Kazakhstan</td><td>Kenya</td></tr>
<tr><td>Kuwait</td><td>Latvia</td><td>Lebanon</td></tr>
<tr><td>Lithuania</td><td>Luxembourg</td><td>Macau</td></tr>
<tr><td>Malaysia</td><td>Malta</td><td>Mauritius</td></tr>
<tr><td>Mexico</td><td>Moldova</td><td>Netherlands</td></tr>
<tr><td>New Zealand</td><td>Nicaragua</td><td>Nigeria</td></tr>
<tr><td>Norway</td><td>Oman</td><td>Panama</td></tr>
<tr><td>Paraguay</td><td>Peru</td><td>Philippines</td></tr>
<tr><td>Poland</td><td>Portugal</td><td>Qatar</td></tr>
<tr><td>Romania</td><td>Russia</td><td>Saudi Arabia</td></tr>
<tr><td>Singapore</td><td>Slovakia</td><td>Slovenia</td></tr>
<tr><td>South Africa</td><td>Spain</td><td>Sweden</td></tr>
<tr><td>Switzerland</td><td>Taiwan</td><td>Tanzania</td></tr>
<tr><td>Thailand</td><td>Trinidad and Tobago</td><td>Turkey</td></tr>
<tr><td>Uganda</td><td>Ukraine</td><td>United Arab Emirates</td></tr>
<tr><td>United Kingdom</td><td>United States</td><td>Uruguay</td></tr>
<tr><td>Uzbekistan</td><td>Venezuela</td><td>Vietnam</td></tr>
<tr><td>Yemen</td></tr>
</tbody>
</table>

#### Sign-in to the iTunes Affiliate Program

__Warning :__ before creating your account, you should insure that you have a _live_ app in the store, or a _live_ web site. __Your web site can't be in beta__, or in 'work in progress' mode. It must be live, with real datas and content, otherwise your affiliation account creation will be rejected.

Now, go to <https://phgconsole.performancehorizon.com/login/itunes/>, click on Sign-In:

<img src="/2014/02/21/phg2.png" alt="Apply PHG" width="600" height="501">

Fill the information:

<img src="/2014/02/21/phg4.png" alt="Apply PHG" width="600" height="501">

Some info:

<img src="/2014/02/21/phg5.png" alt="Apply PHG" width="600" height="501">

<img src="/2014/02/21/phg7.png" alt="Apply PHG" width="600" height="558">

Now, you just have to wait a few days (usually 3 to 5 days) and wait for your account creation confirmation. If your web site / app is live, your account should be validated without problem.

Once you have been notified that your affiliate account have been accepted, you can go sign-in <http://affiliate.itunes.apple.com/signin>. In the email that you've received, you have been given an __Affiliated ID (or Affiliate Token)__: you really just need this token to make money! Affiliated token looks something like `11lqRB` (which's Manbolo's one).

In case you miss it, you will find yours in your [PHG console](https://phgconsole.performancehorizon.com/login/itunes/) on the top-right corner:

<a href="/2014/02/21/phg8.png"><img src="/2014/02/21/phg8.png" alt="PHG console" width="600" height="408"></a>


<h3 id="a3">3. Linking</h3>

Now that you've your affiliate token, you can start making money. All that you've to do is simply adding this token to the end of any iTunes, App Store or iBooks Store links to be eligible for commissions.

#### On a web site

Inserting an affiliate link in a web page:
 
<pre><code>&lt;a href="https://itunes.apple.com/us/app/numbers/id361304891?mt=8&amp;uo=4&amp;<b>at=AffiliateTokenHere</b>"&gt;Numbers - Apple&lt;/a&gt;
</code></pre>

Notice the `at=AffiliateTokenHere` added parameter at the end of the URL. Juste replace `AffiliateTokenHere` with your PHG affiliate token and that's it. 

#### In a native app

If we want to promote [Meon][] in one of our app, we could write this:

	- (IBAction)buyApp:(id)sender
	{
		    NSString *urlString = @"https://itunes.apple.com/app/meon/id400274934?mt=8&uo=4&at=11lqRB";
			NSURL *url = [NSURL URLWithString:urlString];
			[[UIApplication sharedApplication] openURL:url];    
	}

`https://itunes.apple.com/app/meon/id400274934?mt=8&uo=4` is the unaffiliated link, while <code>https://itunes.apple.com/app/meon/id400274934?mt=8&amp;uo=4<b>&amp;at=11lqRB</b></code> is the affiliated ones, using our affiliate token `11lqRB`.

Starting from iOS 6, you have the possibility to show, inside your app, an "iTunes controller": <a href="https://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKITunesProductViewController_Ref/SKStoreProductViewController.html"><code>SKStoreProductViewController</code></a>. The big advantage over the previous approach is that you user is not redirected to the App Store, he can buy apps (and other iTunes content) directly inside you app, and never quit it. Note that you can also write reviews without quitting the app.

<img src="/2014/02/21/storeproduct.png" alt="SKStoreProductViewController inside an app" width="320" height="584">

Unfortunately, as of iOS 7.0.6, __there is no way to pass an affiliate token to a SKStoreProductViewController__. It's rather surprising because the APIs use to initialise this view controller (just a dictionary) will be well fitted to add an affiliate token. That's said, if you still want to use <a href="https://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKITunesProductViewController_Ref/SKStoreProductViewController.html"><code>SKStoreProductViewController</code></a>, here is how you would do it:

	- (IBAction)buyApp:(id)sender
	{
		// The store id of the product that you want to promote.
	    NSString *storeId = @"417817520";
	    NSDictionary *parameters = @{SKStoreProductParameterITunesItemIdentifier: storeId};
	    
		SKStoreProductViewController *controller = [[SKStoreProductViewController alloc] init];
		[controller loadProductWithParameters:parameters completionBlock:nil];
		[self presentViewController:controller animated:YES completion:nil];
	}


#### With a Smart App Banner

<img src="/2014/02/21/banner.png" alt="Smart App Banner" width="320" height="252">

If you plan to use [Smart App Banners][], be sure to read <http://blog.manbolo.com/2012/10/19/invasion-of-the-smart-app-banners>. You can use your affiliate token in a Smart App Banner: 

<pre><code>&lt;meta name="apple-itunes-app"
        content="app-id=400274934, 
        <b>affiliate-data=at=11lqRB"&gt;</b>
</code></pre>

#### Campaigns

You can also use another parameter `ct`, the campaign text, that you can optionally add to any link in order to track sales from a specific marketing campaign. For example, the link below has added a campaign tracking parameter for a blog link. You can name the campaigns anything you choose, but the `ct` value may not be longer than 40 characters:

	https://itunes.apple.com/app/meon/id400274934?mt=8&uo=4&at=11lqRB&ct=blog

Then, you will see the performance of this campaign in your PHG console dashboard.

You can get more informations on linking here: [Basic Affiliate Link Guidelines for the PHG Network][].


<h3 id="a4">4. API and tools</h3>

If you want to build a service base on affiliation, you will need to find links to useful content on iTunes. There are some tools and APIs to help you:


#### Search API

<http://www.apple.com/itunes/affiliates/resources/blog/introduction---search-api.html>

The lookup API is really useful: given an app id, you will get the description, URL of app icons, screenshots, price, average rating, user rating count etc… More information on the lookup API in [Useful iTunes Web Services][].

#### Enterprise Partner Feed

Apple gives you also a much more powerful tool: a direct access to the entire App Store metadata database, called [Enterprise Partner Feed][], or simply EPF. EPF provides a daily access to the iTunes content entire database (apps, movies song) and you can use this tool to build your killer app: it’s much more powerful than iTunes Search API but need more work.

EPF is daily updated, so you can use it to extract useful content and add affiliation. Note that any links extracted from the database must be used with an affiliate token.

Access on the database requires login credentials and an active partnership with the affiliate program. You can apply to get access by filling a request at <http://itunesaffiliate.phgsupport.com/anonymous_requests/new> (don't send request to EPFrequest@apple.com, the mail is no longer in use). You will receive an answer in a few days.

<h3 id="a5">5. Useful links</h3>

[WWDC 2012 - Session 603: Tools, Services, and APIs for iTunes Affiliate Program Marketing][]

[WWDC 2010 - Session 133: Using iTunes and App Store Affiliate Tools and Technologies][]

<http://david-smith.org/blog/2013/08/19/itunes-affiliate-linking/>

<http://www.apple.com/itunes/affiliates/resources/>

<http://www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html>

From jc.

<hn>https://news.ycombinator.com/item?id=7279780</hn>

[Affiliation]: http://en.wikipedia.org/wiki/Affiliate_program
[affiliation on iTunes]: http://www.apple.com/itunes/affiliates/resources/
[since there have been some changes recently]: http://www.apple.com/itunes/affiliates/resources/blog/important-news-for-europe-and-south-america.html
[Push Notifications]: https://developer.apple.com/notifications/
[an Amazon affiliation program]: https://affiliate-program.amazon.com/
[no affiliation program for Google Play]: http://trendblog.net/why-no-google-play-affiliate-program/
[Performance Horizon Group]: https://www.performancehorizon.com
[iTunes Affiliate program with PHG]: https://phgconsole.performancehorizon.com/login/itunes/
[Basic Affiliate Link Guidelines for the PHG Network]: http://www.apple.com/itunes/affiliates/resources/documentation/basic_affiliate_link_guidelines_for_the_phg_network.html
[Smart App Banners]: https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html
[Useful iTunes Web Services]: http://blog.manbolo.com//2012/09/10/useful-itunes-web-services
[Enterprise Partner Feed]: http://www.apple.com/itunes/affiliates/resources/documentation/enterprise-partner-feed-flat.html
[Meon]: https://itunes.apple.com/app/meon/id400274934?mt=8&uo=4&at=11lqRB
[WWDC 2012 - Session 603: Tools, Services, and APIs for iTunes Affiliate Program Marketing]: https://developer.apple.com/videos/wwdc/2012/index.php?id=603
[WWDC 2010 - Session 133: Using iTunes and App Store Affiliate Tools and Technologies]: http://adcdownload.apple.com//wwdc_2010/wwdc_2010_video_assets__pdfs/133__using_itunes__app_store_affiliate_tools_and_technologies.pdf
